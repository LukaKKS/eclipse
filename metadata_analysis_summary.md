# SNOMED CT 메타데이터 속성 분석 결과

## 📊 분석 결과 요약

### Concept 노드 속성

| 속성 | 고유값 | 전체 노드 | 다양성 | 권장사항 |
|------|--------|----------|--------|----------|
| `effectiveTime` | 87개 | 4,253개 | 2.05% | ⚠️ 제거 고려 |
| `definitionStatusId` | 2개 | 4,253개 | 0.05% | ⚠️ 제거 고려 |
| `moduleId` | 2개 | 4,253개 | 0.05% | ⚠️ 제거 고려 |

### Relationship 속성

| 속성 | 고유값 | 전체 관계 | 다양성 | 권장사항 |
|------|--------|----------|--------|----------|
| `relationshipGroup` | 7개 | 2,656개 | 0.26% | ⚠️ 제거 고려 |
| `characteristicTypeId` | 1개 | 2,656개 | 0.04% | ⚠️ 제거 고려 |

## 💾 저장 공간 영향

- **현재 데이터 기준**: 약 0.23 MB 절약 가능
- **데이터 증가 시**: 인덱스 크기 감소로 성능 향상 기대

## ✅ 필수 속성 (유지)

### Concept 노드
- ✅ `id`: 노드 식별에 필수
- ✅ `name`: 개념 이름 표시에 필수
- ✅ `allTerms`: 검색 및 매칭에 유용

### Relationship
- ✅ `id`: 관계 식별에 필수
- ✅ `typeId`: **관계 타입 구분에 필수** (IS_A, CAUSED_BY 등)

## ⚠️ 제거 고려 속성

### 제거해도 되는 이유

1. **effectiveTime**: 
   - 87개 고유값만 존재 (2.05% 다양성)
   - 버전 관리가 필요 없으면 불필요
   - 대부분 동일한 날짜

2. **definitionStatusId**:
   - 2개 값만 존재 (완전 정의 vs 원시 정의)
   - 실제 쿼리에서 거의 사용 안 함
   - 0.05% 다양성

3. **moduleId**:
   - GPFP는 대부분 동일한 모듈 (99.95%)
   - 모듈 구분이 필요 없으면 불필요

4. **relationshipGroup**:
   - 대부분 '0' 값
   - 0.26% 다양성

5. **characteristicTypeId**:
   - 1개 값만 존재 (100% 동일)
   - 완전히 불필요

## 🚀 최적화 효과

### 성능 향상
- ✅ 인덱스 크기 감소
- ✅ 쿼리 속도 향상
- ✅ 메모리 사용량 감소
- ✅ 데이터 로드 시간 단축

### 데이터 증가 시
- 10만개 노드: 약 5.4 MB 절약
- 100만개 노드: 약 54 MB 절약
- 인덱스 성능 향상 효과 더 큼

## 📝 사용 방법

### 최적화 버전 사용 (권장)

```python
# 메타데이터 제외 (기본값)
loader = SNOMEDToNeo4jLoaderOptimized(
    international_path, 
    gpfp_path,
    include_metadata=False  # 메타데이터 제외
)
```

### 메타데이터 포함 버전

```python
# 메타데이터 포함 (필요한 경우만)
loader = SNOMEDToNeo4jLoaderOptimized(
    international_path, 
    gpfp_path,
    include_metadata=True  # 메타데이터 포함
)
```

## 🎯 결론

**대부분의 메타데이터 속성은 제거해도 됩니다!**

- 실제 쿼리에서 거의 사용하지 않음
- 대부분 동일한 값으로 정보 가치 낮음
- 제거 시 성능 향상 및 저장 공간 절약
- **typeId는 반드시 유지** (관계 타입 구분에 필수)

